<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.sakila.mapper.StoreMapper">
	
	<!-- store 상세정보 -->
	<select id="selectStoreList" parameterType="Map">
			select
			    t.store_id storeId,
			    t.manager_staff_id managerStaffId,
			    t.address_id addressId,
			    a.address address,
			    a.district district,
			    a.city_id cityId,
			    a.postal_code postalCode,
			    a.phone phone
			from address a 
			inner join (select 
			            store_id,
			            manager_staff_id,
			            address_id
			           from store) t 
			on a.address_id = t.address_id;
	</select>
	
	<insert id="insertStore" parameterType="com.example.sakila.vo.Store" useGeneratedKeys="true" keyProperty="storeId">
		insert into store(
			manager_staff_id,
			address_id
		) values (
			#{managerStaffId}, #{addressId}
		)
	</insert>
</mapper>
